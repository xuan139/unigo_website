<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>{{ post['title'] }} - 论坛帖子</title>
    <style>
        body { font-family: Arial; background:#f7f7f7; margin:0; padding:0; }
        header { background:#0073e6; color:white; padding:15px; text-align:center; }
        .container { max-width:700px; margin:20px auto; background:white; padding:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
        h2 { margin-top:0; }
        .post-content { margin:15px 0; padding:10px; background:#f0f0f0; border-radius:5px; }
        .comment { border-top:1px solid #ddd; padding:10px 0; }
        .comment .author { font-weight:bold; }
        .comment .time { font-size:0.85em; color:#555; }
        textarea { width:100%; padding:8px; margin-top:5px; border-radius:4px; border:1px solid #ccc; box-sizing:border-box; resize:vertical; }
        button { margin-top:10px; padding:8px 12px; background:#0073e6; color:white; border:none; border-radius:4px; cursor:pointer; }
        button:hover { background:#005bb5; }
        .back-link { display:block; margin-top:15px; text-decoration:none; color:#0073e6; }
        .flash { color:red; margin-bottom:10px; }
    </style>
</head>
<body>
    <header><h1>{{ post['title'] }}</h1></header>
    <div class="container">
        <div class="post-content">
            <p>{{ post['content'] }}</p>
        </div>

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for msg in messages %}
              <div class="flash">{{ msg }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <h3>评论</h3>
        {% for comment in comments %}
        <div class="comment">
            <div class="author">{{ comment['name'] }}</div>
            <div class="time">{{ comment['created_at'] }}</div>
            <div class="content">{{ comment['content'] }}</div>
        </div>
        {% endfor %}

        <form method="post">
            <label for="content">添加评论:</label>
            <textarea id="content" name="content" rows="4" required></textarea>
            <button type="submit">发表评论</button>
        </form>

        <a class="back-link" href="{{ url_for('forum.forum_index') }}">返回论坛首页</a>
    </div>
</body>
</html>
