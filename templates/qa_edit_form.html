{% extends "base.html" %}

{% block title %}Edit QA - OStation{% endblock %}

{% block head %}
<style>
  .qa-wrapper { max-width: 720px; margin: 0 auto 32px; }
  .qa-title { margin: 0 0 .75rem; font-weight: 600; }
  .qa-sub { color: #6c757d; margin: 0 0 1rem; }
</style>
{% endblock %}

{% block content %}
<div class="container qa-wrapper">
  <h2 class="qa-title">Edit QA</h2>
  {% if message %}
    <div class="alert alert-danger" role="alert">{{ message }}</div>
  {% endif %}

  <form method="POST" class="needs-validation" novalidate>
    <div class="mb-3">
      <label class="form-label">Language</label>
      <select name="lang" class="form-select" required>
        <option value="en">English</option>
        <option value="zh">简体中文</option>
        <option value="zh_TW">繁體中文</option>
        <option value="ja">日本語</option>
        <option value="ko">한국어</option>
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Question</label>
      <input type="text" name="question" value="{{ qa.question }}" class="form-control" required>
      <div class="invalid-feedback">Please enter the question</div>
    </div>

    <div class="mb-3">
      <label class="form-label">Answer</label>
      <textarea name="answer" rows="6" class="form-control" required>{{ qa.answer }}</textarea>
      <div class="invalid-feedback">Please enter the answer</div>
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">Save</button>
      <a href="{{ url_for('qa_edit') }}" class="btn btn-outline-secondary">Cancel</a>
    </div>
  </form>
</div>

{% block scripts %}
<script>
// Bootstrap 前端校验（可选）
(function () {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  Array.from(forms).forEach(function (form) {
    form.addEventListener('submit', function (event) {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })
})()
</script>
{% endblock %}
{% endblock %}
